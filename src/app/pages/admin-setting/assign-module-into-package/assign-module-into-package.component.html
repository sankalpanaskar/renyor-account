<form #fm="ngForm" (ngSubmit)="onSubmit(fm)" novalidate id="leadForm" style="width: 100%;margin: 0 auto;">      
    <nb-card>
        <nb-card-header>Assign Module Into Package</nb-card-header>
            <nb-card-body [nbSpinner]="loading" nbSpinnerStatus="primary">
                <div class="row">
                    <div class="col-lg-6 mb-10">
                        <label class="small-label">
                            Package<span style="color:#d32f2f">*</span>
                        </label>
                        <nb-select shape="semi-round" placeholder="Select Package" name="package_id"
                            required #package_id="ngModel" [(ngModel)]="model.package_id" (selectedChange)="onPackageChange($event)">
                            <nb-option  *ngFor="let package of packageList" [value]="package.id">{{package.package_name}}</nb-option>
                        </nb-select>
                        <div *ngIf="fm.submitted && package_id.invalid" class="error-message">
                            Package is required
                        </div>
                    </div>
                    <div class="col-lg-6 mb-10">
                        <label class="small-label">
                            Parent Menu<span style="color:#d32f2f">*</span>
                        </label>
                        <nb-select shape="semi-round" placeholder="Select Parent Menu" name="parent_id"
                            required #parent_id="ngModel" [(ngModel)]="model.parent_id" (selectedChange)="onParentMenuChange($event)">
                            <nb-option  *ngFor="let pm of parentMenuList" [value]="pm.id">{{pm.menu_name}}</nb-option>
                        </nb-select>
                        <div *ngIf="fm.submitted && parent_id.invalid" class="error-message">
                            Parent menu is required
                        </div>
                    </div>
                    <div class="col-lg-12 mb-10">
                        <label class="small-label">
                            Module<span style="color:#d32f2f">*</span>
                        </label>
                        <nb-select shape="semi-round" placeholder="Select Parent Menu" name="module_id" required #module_id="ngModel" [(ngModel)]="model.module_id" multiple (selectedChange)="onModuleChange($event)">
                            <nb-option [value]="'ALL'" *ngIf="moduleList.length>0">Select All</nb-option>
                            <nb-option *ngFor="let module of moduleList" [value]="module.id">
                                {{ module.menu_name }}
                            </nb-option>
                        </nb-select>
                        <div *ngIf="fm.submitted && module_id.invalid" class="error-message">
                            Module is required
                        </div>
                    </div>

                </div>
            </nb-card-body>
        <nb-card-footer>
            <div style="display:flex; justify-content:flex-end; gap:8px;">
                <button nbButton status="primary" shape="semi-round" hero type="submit"
                    [disabled]="loading">
                    Save
                </button>
            </div>
        </nb-card-footer>
    </nb-card>
</form>

<nb-card>
    <nb-card-header class="section-header d-flex justify-content-between align-items-center">
        <span>Module List</span>
    </nb-card-header>
    <nb-card-body [nbSpinner]="loading" nbSpinnerStatus="primary">
        <div class="row" *ngFor="let menu of apiData">
            <div class="col-lg-12">
                <label style="font-weight: bold;color: #a2acc0;">{{menu.title}}</label>
            </div>
            <div class="col-lg-3" *ngFor="let children of menu.children">
                <nb-alert status="info">{{children.title}}</nb-alert>
            </div>
            
        </div>
    </nb-card-body>
</nb-card>
