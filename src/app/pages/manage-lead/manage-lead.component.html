<nb-card
  *ngIf="globalService.role_id === 34 || globalService.role_id === 23 || globalService.role_id === 11 || globalService.role_id === 15 || globalService.role_id === 7">
  <nb-card-header>
    Manage Lead
  </nb-card-header>

  <nb-card-body class="position-relative">
    <!-- Spinner overlay -->
    <div *ngIf="loading" class="loading-overlay d-flex justify-content-center align-items-center">
      <nb-spinner size="large" status="primary"></nb-spinner>
    </div>

    <div [class.content-blur]="loading">
      <!-- Followups Buttons -->
      <div class="row align-items-center mb-3">
        <div class="col-md-2">
          <label style="font-weight: 600;">Followups:</label>
        </div>
        <div class="col-md-8">
          <button class="tiny-button" style="margin-right: 4px;" nbButton size="small" status="danger"
            (click)="filterFollowups('newLead')">
            New Lead <span class="count-span">{{newLeadCount}}</span>
          </button>
          <button class="tiny-button" style="margin-right: 4px;" nbButton size="small" status="primary"
            (click)="filterFollowups('today')">Today <span class="count-span">{{todayCount}}</span></button>
          <button class="tiny-button" style="margin-right: 4px;" nbButton size="small" status="success"
            (click)="filterFollowups('yesterday')">Yesterday <span class="count-span">{{yesterdayCount}}</span></button>
          <button class="tiny-button" style="margin-right: 4px;" nbButton size="small" status="warning"
            (click)="filterFollowups('tomorrow')">Tomorrow <span class="count-span">{{tomorrowCount}}</span></button>
          <button class="tiny-button" style="margin-right: 4px;" nbButton size="small" status="info"
            (click)="getLeadData()">ALL <span class="count-span">{{apiData.length}}</span></button>
        </div>
      </div>

      <div class="row align-items-center mb-3">
        <div class="col-md-2">
          <label style="font-weight: 600;">Filters:</label>
        </div>
        <div class="col-md-10">

          <div class="col-md-6" style="padding: 0px !important;">
            <nb-select placeholder="Select Filter"   [(selected)]="selectedFilter"
               (selectedChange)="filterFollowups($event)" fullWidth>
              <nb-option value="connected">
                Connected
                <span class="count-badge">{{ connectCount }}</span>
              </nb-option>
              <nb-option value="not-connected">
                Not-Connected
                <span class="count-badge">{{ notConnectCount }}</span>
              </nb-option>
              <nb-option value="do-not-call">
                Do Not Call
                <span class="count-badge">{{ doNotCallCount }}</span>
              </nb-option>
              <nb-option value="interested">
                Intrested
                <span class="count-badge">{{ interestedCount }}</span>
              </nb-option>
              <nb-option value="studentPending">
                Counseling Link Send
                <span class="count-badge">{{ studentPendingCount }}</span>
              </nb-option>
              <nb-option value="poPending">
                PO Interview Pending
                <span class="count-badge">{{ poPendingCount }}</span>
              </nb-option>
              <nb-option value="poRejected">
                PO Rejected
                <span class="count-badge">{{ poRejectedCount }}</span>
              </nb-option>
              <nb-option value="quizPending">
                Quiz Pending
                <span class="count-badge">{{ quizPendingCount }}</span>
              </nb-option>
              <nb-option value="oriPending">
                Quiz Passed
                <span class="count-badge">{{ oriPendingCount }}</span>
              </nb-option>
              <nb-option value="quizFailed">
                Quiz Failed
                <span class="count-badge">{{ quizFailedCount }}</span>
              </nb-option>
              <nb-option value="oriGenerated">
                ORI Generated
                <span class="count-badge">{{ oriGeneratedCount }}</span>
              </nb-option>
              <nb-option value="registrationDone">
                Registration Done
                <span class="count-badge">{{ registrationDoneCount }}</span>
              </nb-option>
              <nb-option value="mneVerification">
                MNE Verification Done
                <span class="count-badge">{{ mneVerificationCount }}</span>
              </nb-option>
              <nb-option value="enrolled">
                Enrolled Students
                <span class="count-badge">{{ enrolledCount }}</span>
              </nb-option>
            </nb-select>
          </div>
        </div>
      </div>

      <input type="text" nbInput fullWidth shape="semi-round" #search class="search mb-3" placeholder="Search..."
        (keydown.enter)="onSearch(search.value)">
      <ng2-smart-table [settings]="settings" [source]="source">
      </ng2-smart-table>
    </div>
  </nb-card-body>
</nb-card>